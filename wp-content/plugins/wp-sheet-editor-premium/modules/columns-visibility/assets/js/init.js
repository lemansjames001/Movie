function vgseColumnsVisibilityUpdateHOT(e,n,t,i){var o=jQuery(".modal-columns-visibility form"),s=o.find(".columns-enabled li .js-column-key");!s.length&&window.vgseColumnsVisibilityEnabled&&(s=window.vgseColumnsVisibilityEnabled);var l=jQuery(".save_post_type_settings"),a=o.parents(".remodal").remodal(),u=o.find(".columns-enabled li .fa-refresh").parent(),r=!1;if(o.find('input[name="wpse_auto_reload_after_saving"]').val()&&(r=!0),u.length){var c=[];u.find(".column-title").each(function(){c.push(jQuery.trim(jQuery(this).text()))});var d=vgse_editor_settings.texts.confirm_column_reload_page.replace("{columns}",c.join(", "));confirm(d)&&(l.prop("checked",!0),r=!0,loading_ajax({estado:!0}))}if(!s.length)return loading_ajax({estado:!1}),"opened"===a.getState()&&a.close(),!1;if("undefined"!=typeof hot){window.vgseColumnsVisibilityEnabled=s,e=e||hot.getSettings().columns,n=n||vgse_editor_settings.colHeaders,t=t||vgse_editor_settings.colWidths;var m=[],v=[],y=[],p=[];e.forEach(function(e,i){e.vgOriginalIndex=i,m[e.data]=e},this);var g=o.find(".not-allowed-columns").val();g=g.replace("ID,","").split(",");var f=[];if(s.each(function(){var e=jQuery(this).val();f.push(e)}),(f=g.concat(f)).forEach(function(e,i){m[e]&&(v.push(m[e]),y.push(n[e]),p.push(t[e]))},this),hot.updateSettings({columns:v,colHeaders:y,colWidths:p}),!l.is(":checked")||"softUpdate"===i)return loading_ajax({estado:!1}),"opened"===a.getState()&&a.close(),!1}var h=o.find("input,select,textarea").filter(function(){return!jQuery(this).parents(".vgse-sorter-section").length}).serializeArray();return h.push({name:"extra_data",value:JSON.stringify(formToObject("columns-manager-form"))}),r&&loading_ajax({estado:!0}),jQuery.post(o.attr("action"),h,function(e){var i=o.data("callback");i&&vgseExecuteFunctionByName(i,window,{response:e,form:o}),r&&window.location.href.indexOf("wpse_no_reload=1")<0&&window.location.reload()}),r||loading_ajax({estado:!1}),a&&"opened"===a.getState()&&a.close(),!1}function vgseColumnsVisibilityEqualizeHeight(){jQuery("#vgse-columns-enabled,#vgse-columns-disabled").css("height","");var e=jQuery("#vgse-columns-enabled").height(),i=jQuery("#vgse-columns-disabled").height(),n=i<e?e:i;0<n&&jQuery("#vgse-columns-enabled,#vgse-columns-disabled").height(n)}function vgseColumnsVisibilityInit(){if(window.vgseColumnsVisibilityAlreadyInit)return!0;window.vgseColumnsVisibilityAlreadyInit=!0;var n=document.getElementById("vgse-columns-enabled"),t=document.getElementById("vgse-columns-disabled"),i=jQuery(".modal-columns-visibility");if(!n||!t)return!0;function o(){i.find(".columns-enabled li input").each(function(){jQuery(this).attr("name",jQuery(this).attr("name").replace("disallowed_column","column"))}),i.find(".columns-disabled li input").each(function(){jQuery(this).attr("name",jQuery(this).attr("name").replace(/^column/,"disallowed_column"))});var e=i.find(".columns-enabled li .js-column-key").map(function(){return jQuery(this).val()}).get().join(",");i.find(".all-allowed-columns").val(e),window.vgseColumnsVisibilityUsed=!0}function s(n,e){if(window.wpseExecutionActionOnSimilarColumns)return!0;var t=e.parent().find(".column-title").text(),o=t.replace(/(\d+)/g,"1").replace(": 1: ",":").split("1"),i=e.parents("ul").first(),s=[],l=[];if(1===o.length)return!0;if(o=[o[0],""],i.find(".column-title").each(function(){var e=jQuery(this).text(),i=e.replace(/(\d+)/g,"1").replace(": 1: ",":").split("1");i.push(""),1<vgseCountMatchingElements(o,i)&&e!==t&&(s.push(jQuery(this).parent().find(".js-column-key").val()),l.push(e))}),!s.length)return!0;window.wpseExecutionActionOnSimilarColumns=!0;var a=4<s.length?vgse_editor_settings.texts.clicks_that_will_be_saved.replace("{clicks_count}",s.length):"";a+="\n"+l.join("\n");var u=vgse_editor_settings.texts.apply_action_to_similar_columns.replace("{columns}",a);confirm(u)&&i.children().each(function(){var e=jQuery(this),i=e.find(".js-column-key").val();-1<s.indexOf(i)&&e.find(n).click()}),window.wpseExecutionActionOnSimilarColumns=!1}vgseColumnsVisibilityEqualizeHeight(),window.enabledSortable=Sortable.create(n,{group:"vgseColumns",animation:100,onSort:function(e){o()}}),window.disabledSortable=Sortable.create(t,{group:{name:"vgseColumns"},animation:100}),jQuery("body").on("click",".modal-columns-visibility .vgse-change-all-states",function(e){e.preventDefault(),"disabled"===jQuery(this).data("to")?jQuery(n).find("li:visible").appendTo(jQuery(t)):jQuery(t).find("li:visible").appendTo(jQuery(n)),o()}),jQuery("body").on("submit",".modal-columns-visibility  form",function(e){e.preventDefault(),o();var i=vgseColumnsVisibilityUpdateHOT(null,null,null,"hardUpdate");return"boolean"==typeof i&&i}),jQuery("body").on("click",".modal-columns-visibility  .vgse-restore-removed-columns",function(e){e.preventDefault(),jQuery.post(ajaxurl,{action:"vgse_restore_columns",nonce:jQuery('.modal-columns-visibility input[name="wpsecv_nonce"]').val(),post_type:jQuery('.modal-columns-visibility input[name="wpsecv_post_type"]').val()},function(e){e.success?alert(e.data.message):notification({mensaje:e.data.message,tipo:"error",tiempo:3e4})})}),jQuery("body").on("click",".modal-columns-visibility   .deactivate-column",function(e){if((e.preventDefault(),window.hot&&!window.wpseExecutionActionOnSimilarColumns)&&beGetModifiedItems().length)return alert(vgse_editor_settings.texts.save_changes_before_remove_column),!0;s(".deactivate-column",jQuery(this)),$column=jQuery(this).parent(),$column.appendTo(".modal-columns-visibility .columns-disabled"),o()}),jQuery("body").on("click",".modal-columns-visibility   .enable-column",function(e){e.preventDefault(),s(".enable-column",jQuery(this)),$column=jQuery(this).parent(),$column.appendTo(".modal-columns-visibility .columns-enabled"),o()}),jQuery("body").on("click",".modal-columns-visibility   .remove-column",function(e){if((e.preventDefault(),window.hot)&&beGetModifiedItems().length)return alert(vgse_editor_settings.texts.save_changes_before_remove_column),!0;var i=jQuery(this);s(".remove-column",jQuery(this));var n=i.parent().find(".js-column-key").val();return window.lastColumnKeyRemoved=n,i.parent().remove(),jQuery.post(ajaxurl,{action:"vgse_remove_column",nonce:jQuery('.modal-columns-visibility input[name="wpsecv_nonce"]').val(),post_type:jQuery('.modal-columns-visibility input[name="wpsecv_post_type"]').val(),column_key:n},function(e){e.success?o():notification({mensaje:e.data.message,tipo:"error",tiempo:3e4})}),!1}),o(),jQuery("body").on("change",".vgse-sorter-section .wpse-bulk-action",function(e){var i=jQuery(this).val();"disable"===i?jQuery(n).find("li:visible").appendTo(jQuery(t)):"enable"===i?jQuery(t).find("li:visible").appendTo(jQuery(n)):"delete"===i&&jQuery(t).find("li:visible .remove-column").each(function(){jQuery(this).click()}),jQuery(this).val(""),jQuery(this).parent().find("input").val("").trigger("change"),o()}),jQuery("body").on("click",".vgse-sorter-section .toggle-search-button",function(e){e.preventDefault(),i.find(".wpse-columns-bulk-actions").toggle(),jQuery(this).parents(".vgse-sorter-section").find(".wpse-columns-bulk-actions input").focus()}),jQuery("body").on("keyup change",".vgse-sorter-section .wpse-filter-list",_throttle(function(e){var i=jQuery(this).val(),n=jQuery(this).parents(".vgse-sorter-section");if(i){i.toLowerCase();n.find(".column-title").each(function(){jQuery(this).text().toLowerCase().indexOf(i)<0?jQuery(this).parent().hide():jQuery(this).parent().show()})}else n.find("li").show()},800,!0))}jQuery(document).on("opened",".modal-columns-visibility",function(){vgseColumnsVisibilityInit(),vgseColumnsVisibilityEqualizeHeight()}),jQuery(window).load(function(){jQuery("body").on("click",".wpse-toggle-head",function(){jQuery(this).next(".wpse-toggle-content").find(".modal-columns-visibility").length&&(vgseColumnsVisibilityEqualizeHeight(),vgseColumnsVisibilityInit())})}),jQuery(document).ready(function(){if("undefined"==typeof hot||!jQuery(".modal-columns-visibility").length)return!0;var e=hot.getSettings().contextMenu;void 0===e.items&&(e.items={}),e.items.wpse_hide_column={name:vgse_editor_settings.texts.hide_column,hidden:function(){if(!hot.getSelected())return!0;var e=hot.colToProp(hot.getSelected()[0][1]),i=vgse_editor_settings.final_spreadsheet_columns_settings[e];return i&&!i.allow_to_hide},callback:function(e,i,n){if(beGetModifiedItems().length)alert(vgse_editor_settings.texts.save_changes_before_remove_column);else{vgseColumnsVisibilityInit();var t=hot.colToProp(i[0].start.col),o=jQuery(".modal-columns-visibility");o.find('.columns-enabled .js-column-key[value="'+t+'"]').parent("li").appendTo(o.find(".columns-disabled")),o.find(".save_post_type_settings").prop("checked",!0),o.find("form").submit(),notification({mensaje:vgse_editor_settings.texts.column_removed,tipo:"success",tiempo:4e4})}}},e.items.wpse_open_columns_visibility={name:vgse_editor_settings.texts.open_columns_visibility,callback:function(e,i,n){jQuery(".modal-columns-visibility").remodal().open()}},hot.updateSettings({contextMenu:e})});